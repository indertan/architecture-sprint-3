# Задание 1. Анализ и планирование

Система "Smart Home Monolith" представляет собой монолитное приложение для управления отоплением и мониторинга температуры в умном доме. 
Пользователи могут включать/выключать отопление, устанавливать температуру в системе отопления и получать информацию о текущей температуре.
Можно выделить следующие домены (исходя из описания и имеющейся кодовой базы, [диаграмма с описанием доменов](diagrams/asis/domain/Domain.puml))
- Умные устройства
- Пользователи

Основные недостатки текущего решения:
- Нет возможности точечного масштабирования функционала. Из-за этого, при серьезной нагрузке, могут возникнуть проблемы с масштабированием
- Необходимость полной остановки системы при любом изменении системы будет означать значительное время недоступности системы клиентам
- Внесение изменений в рамках единой кодовой базы может приводить к непредсказуемым ошибкам
- Длительный цикл разработки и развертывания системы
- Синхронное взаимодействие с датчиками может приводить к недоступности системы (количество исполняющих потоков обычно ограничено, 
при долгом ответе от устройств система может подвисать из-за занятости всех потоков получением данных от устройств).

[Диаграмма контекста текущего решения](diagrams/asis/context/Context.puml)

# Задание 2. Проектирование микросервисной архитектур

Исходя из требований к целовой системе можно выделить следующие домены ([диаграмма с описанием доменов](diagrams/tobe/domain/Domain.puml))

Монолитное решение разделено на следующие микросервисы
- Микросервис управления пользователями
- Микросервис управления устройствами
- Микросервис управления умным домом
- Микросервис управления сценариями
- Микросервис управления телеметрией

Также отдельно выделен компонент по взаимодействию с датчиками (шлюз)

Все входящие клиентские запросы поступают на API Gateway, которые осуществляет их маршрутизацию по микросервисам. 
Микросервисы хранят свои данные в БД (Postgresql + ClickHouse). Обмен данными между микросервисами происходит асинхронно, 
через брокер Kafka путем публикации событий.

[Диаграмма контейнеров](diagrams/tobe/container/Container.puml)

[Диаграмма компонентов микросервиса устройств](diagrams/tobe/component/Device.puml)  
[Диаграмма компонентов микросервиса пользовательских сценариев](diagrams/tobe/component/Scenario.puml)  
[Диаграмма компонентов микросервиса умных домов](diagrams/tobe/component/SmartHome.puml)  
[Диаграмма компонентов микросервиса телеметрии](diagrams/tobe/component/Telemetry.puml)  
[Диаграмма компонентов микросервиса пользователей](diagrams/tobe/component/User.puml)  

[Диаграмма кода микросервиса устройств](diagrams/tobe/code/Device.puml)

# Задание 3. Разработка ER-диаграммы
[Диаграмма ER](diagrams/tobe/er/ER.puml)
